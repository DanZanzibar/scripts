wifi-list() {
    export NETWORKS=$(nmcli -t -f SSID device wifi)
    # export NETWORKS="$(echo "$networks_print" | tr '\n' ' ')"
    echo "$NETWORKS"
}

wifi-connect() {
    nmcli device wifi connect "$1" -a
}

_wifi-connect-completions() {
    local ssids=()
    while IFS=$'\n' read -r ssid; do
	ssids+=("$ssid")
    done <<< "$NETWORKS"
    COMPREPLY=( $(compgen -W ${ssids[@]} -- "$2") )
    declare -p COMPREPLY
}

complete -F _wifi-connect-completions wifi-connect
